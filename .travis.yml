language: perl
matrix:
 include:
  - perl: "5.26"
  - perl: "5.22"
  - perl: "5.20"
  - perl: "5.18"
    env: RUN_XVFB=no
  - perl: "5.18"
    env: WITH_TK_FIREBUTTON=yes DISPLAY=:123
  - perl: "5.16"
  - perl: "5.14"
  - perl: "5.12"
  - perl: "5.10"
  - perl: "5.8"

before_install:
 - sudo apt-get update -qq
 - sudo apt-get install -qq xvfb twm libx11-dev libfreetype6-dev libxft-dev
 - if [ "$RUN_XVFB" = "no" ] ; then echo no X11 server; else Xvfb :123 & fi
 - if [ "$RUN_XVFB" = "no" ] ; then echo no X11 server; else (sleep 10; env DISPLAY=:123 twm) & fi
 - if [ "$WITH_TK_FIREBUTTON" = "yes" ]; then cpanm --quiet --notest Tk::FireButton; fi
env:
 - DISPLAY=:123

branches:
 except:
  - /appveyor/
